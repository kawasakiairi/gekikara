<!-- パンくずリスト -->
<% breadcrumb :food_show, @food %>

<div class="container my-5">
  <h1><%= @food.name%>の詳細</h1>
</div>

<div class="container pt-5">
  <div class="row mb-6">
    <!-- 食品画像 -->
    <div class="col-md-6">
      <%= image_tag(@food.food_image.present? ? @food.food_image.url : "image_ramen.png", class: "img-fluid rounded fixed-width-image") %>
    </div>
    <div class="col-md-6">
      <!-- 食品名 -->
      <h2 class="fw-bold text-primary"><%= @food.name %></h2>
      <!-- 食品タグ -->
      <h4 class="fw-bold pt-3">
        <span class="badge rounded-pill bg-primary"><%= @food.food_category.name %></span>
      </h4>
      <!-- 辛さレベル -->
      <h4 class="fw-bold pt-3">
        辛さレベル
        <% @food.spice_level.times do %>
          <i class="bi bi-fire text-danger"></i>
        <% end %>
        <% (5 - @food.spice_level).times do %>
          <i class="bi bi-fire text-secondary"></i>
        <% end %>
      </h4>
      <!-- 希望小売価格 -->
      <h4 class="fw-bold pt-3">
        希望小売価格
        <% if @food.price != 0 %>
          <%= @food.price.to_i %> 円 (税別)
        <% else %>
          オープン価格
        <% end %>
      </h4>
      <!-- タイトル -->
      <p class="fw-bold pt-3"><%= @food.title %></p>
      <!-- 説明 -->
      <p class="fw-bold"><%= @food.body %></p>
    </div>
  </div>
</div>

<div class="container pt-5">
  <h1><%= @food.name%>のレビュー</h1>
</div>

<div class="container bg-light pt-3 mt-3">
  <!-- ページネーション -->
  <div class="container text-end text-primary">
    <%= link_to '新しい順', foods_path(sort: 'new') %>
    <%= link_to '古い順', foods_path(sort: 'old') %>
  </div>

  <div class="container">
      <div class="row">
          <% @reviews.each do |review| %>
          <div class="col-4 pt-3">
              <div class="card shadow h-100 d-flex flex-row">
                  <div class="card-body d-flex flex-column">
                    <!-- ユーザー名 -->
                    <h4 class="card-title"><%= link_to review.user.name, user_path(review.user) %></h4>
                    <!-- タイトル -->
                    <p class="card-text"><%= review.title %></p>
                    <!-- 評価 -->
                    <p class="card-text"><%= review.rating %></p>
                    <!-- 辛さレベル -->
                    <p class="card-text fw-bold mt-2">
                        辛さレベル
                        <% review.spice_level.times do %>
                            <i class="bi bi-fire text-danger"></i>
                        <% end %>
                        <% (5 - review.spice_level).times do %>
                            <i class="bi bi-fire text-secondary"></i>
                        <% end %>
                    </p>
                    <!-- 詳細ボタン -->
                    <div class="d-flex justify-content-between align-items-center mt-auto">
                      <div class="btn-group mt-2">
                        <button type="button" class="btn btn-md btn-outline-primary">詳細</button>
                        <% if current_user == review.user %>
                          <button type="button" class="btn btn-md btn-outline-primary">編集</button>
                        <% end %>
                      </div>
                    </div>
                  </div>
              </div>
          </div>
          <% end %>
      </div>
      <!-- ページネーション -->
      <div class="mt-5">
          <%= paginate @reviews, theme: 'bootstrap-5' %>
      </div>
  </div>
</div>