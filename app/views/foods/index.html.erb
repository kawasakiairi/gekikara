<!-- パンくずリスト -->
<% breadcrumb :food_index %>

<div class="container my-5">

  <!-- タイトル -->
  <div class="text-center">
    <h1><%= I18n.t("index.title") %></h1>
    <% if @total_count != 0 %>
      <% count_html = content_tag(:span, @total_count, class: "fw-bold text-primary display-6") %>
      <span>
        <%= I18n.t("index.subtitle", count: count_html).html_safe %>
      </span>
    <% else %>
      <h5 class="text-info pt-2">
        <%= I18n.t("index.no_food") %>
      </h5>
    <% end %>
  </div>

  <!-- 検索結果一覧 -->
  <% if @foods.present? %>
    <div class="index-form">    
      <!-- ページネーション -->
      <div class="mt-4 me-4 text-end text-primary">
        <%= link_to I18n.t("views.pagination.new"), foods_path(sort: 'new'), class: "pe-2 text-decoration-none #{'text-decoration-underline' if @current_sort == 'new'}" %>
        <%= link_to I18n.t("views.pagination.old"), foods_path(sort: 'old'), class: "pe-2 text-decoration-none #{'text-decoration-underline' if @current_sort == 'old'}" %>
        <%= link_to I18n.t("views.pagination.hot"), foods_path(sort: 'hot'), class: "pe-2 text-decoration-none #{'text-decoration-underline' if @current_sort == 'hot'}" %>
        <%= link_to I18n.t("views.pagination.mild"), foods_path(sort: 'mild'), class: "text-decoration-none #{'text-decoration-underline' if @current_sort == 'mild'}" %>
      </div>

      <!-- 検索結果カード -->
      <div class="mx-4">
        <div class="row mb-5">
          <% @foods.each do |food| %>
            <div class="col-6 pt-4 d-flex">
              <%= link_to food_path(food), class: "card index-card border-primary d-flex flex-row text-decoration-none" do %>
                <!-- 食品写真 -->
                <div class="d-flex align-items-center px-2">
                  <%= image_tag(food.food_image.present? ? food.food_image.url : "image_ramen.png", class: "img-fluid index-food-image") %>
                </div>
                <div class="d-flex flex-column">
                  <!-- 食品名 -->
                  <h5 class="card-title fw-bold mt-2 text-primary">
                    <%= food.name %>
                  </h5>
                  <!-- 食品タグ -->
                  <h6 class="fw-bold">
                    <span class="badge rounded-pill bg-danger"><%= food.food_category.name %></span>
                  </h6>
                  <!-- 辛さレベル -->
                  <span class="card-text fw-bold">
                    <%=  I18n.t("activerecord.attributes.food.spice_level") %>
                    <% food.spice_level.times do %>
                      <i class="bi bi-fire text-danger"></i>
                    <% end %>
                    <% (5 - food.spice_level).times do %>
                      <i class="bi bi-fire text-secondary"></i>
                    <% end %>
                  </span>
                  <!-- 希望小売価格 -->
                  <span class="card-text fw-bold">
                    <%=  I18n.t("activerecord.attributes.food.price") %>
                    <% if food.price != 0 %>
                      <%= number_to_currency(food.price, unit: I18n.t("index.en"), format: "%n %u", precision: 0) %><%= I18n.t("index.in_price") %>
                    <% else %>
                      <%= I18n.t("index.open_price") %>
                    <% end %>
                  </span>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
        <!-- ページネーション -->
        <div class="mt-3">
          <%= paginate @foods, theme: 'bootstrap-5' %>
        </div>
      </div>
    </div>
  <% end %>
</div>
